# Create New Product Documentation

This command helps you quickly set up a new product in the Netwrix documentation site built on Docusaurus v3.

## Quick Reference

**Command Pattern**: `npm start {productname}` or `npm start {productname}/{version}` to test
**Key Files**: 
- `/docs/{productname}/` - Documentation files
- `/sidebars/{productname}.js` or `/sidebars/{productname}/{version}.js` - Sidebar configuration
- `docusaurus.config.js` - Plugin configuration
- `/src/components/HomepageFeatures/index.js` - Product listing
- `/static/img/product_docs/{productname}/` - Images

---

## Complete Step-by-Step Process

### 1. **Gather Information & Validate**
   
   **Ask user for:**
   - Product name (e.g., "Netwrix Privilege Secure", "Access Analyzer")
   - Product type: Single version (e.g., SaaS) or versioned product
   - If versioned: initial version number (e.g., "7.5", "12.0")
   - Product category for homepage placement
   
   **Process product name:**
   ```bash
   # Convert to lowercase, remove spaces, remove "netwrix"
   # "Netwrix Privilege Secure" â†’ "privilegesecure"
   # "Access Analyzer" â†’ "accessanalyzer"
   ```

### 2. **Create Documentation Directory Structure**
   
   **For single-version products:**
   ```bash
   # Create product directory
   mkdir -p docs/{productname}
   
   # Create basic index.md file
   cat > docs/{productname}/index.md << 'EOF'
---
title: '{Product Name}'
sidebar_label: 'Home'
sidebar_position: 1
description: '{Product Name} documentation'
---

# {Product Name}

Welcome to {Product Name} documentation.

## Getting Started

*Content to be added*

## Key Features

*Content to be added*

## Resources

*Content to be added*
EOF
   ```
   
   **For versioned products:**
   ```bash
   # Create version directory
   mkdir -p docs/{productname}/{version}
   
   # Create basic index.md file
   cat > docs/{productname}/{version}/index.md << 'EOF'
---
title: '{Product Name} {version}'
sidebar_label: 'Home'
sidebar_position: 1
description: '{Product Name} {version} documentation'
---

# {Product Name} {version}

Welcome to {Product Name} {version} documentation.

## Getting Started

*Content to be added*

## Key Features

*Content to be added*

## Resources

*Content to be added*
EOF
   
   # Create What's New page
   cat > docs/{productname}/{version}/whatsnew.md << 'EOF'
---
title: "What's New in {Product Name} {version}"
sidebar_label: "What's New"
sidebar_position: 2
description: "New features and improvements in {Product Name} {version}"
---

# What's New in {Product Name} {version}

This release includes the following new features and improvements:

## New Features

*Content to be added*

## Improvements

*Content to be added*

## Bug Fixes

*Content to be added*

## Known Issues

*Content to be added*
EOF
   ```

### 3. **Create Image Directory**
   
   **For single-version products:**
   ```bash
   # Create product image directory
   mkdir -p static/img/product_docs/{productname}
   
   # Create placeholder .gitkeep to ensure directory is tracked
   touch static/img/product_docs/{productname}/.gitkeep
   ```
   
   **For versioned products:**
   ```bash
   # Create version-specific image directory
   mkdir -p static/img/product_docs/{productname}/{version}
   
   # Create placeholder .gitkeep to ensure directory is tracked
   touch static/img/product_docs/{productname}/{version}/.gitkeep
   ```

### 4. **Create Sidebar Configuration**
   
   **For single-version products:**
   ```bash
   # Create sidebar configuration
   cat > sidebars/{productname}.js << 'EOF'
// @ts-check

/** @type {import('@docusaurus/plugin-content-docs').SidebarsConfig} */
const sidebars = {
  productSidebar: [
    {
      type: 'autogenerated',
      dirName: '.',
    },
  ],
};

module.exports = sidebars;
EOF
   ```
   
   **For versioned products:**
   ```bash
   # Create sidebar directory if needed
   mkdir -p sidebars/{productname}
   
   # Create version-specific sidebar
   cat > sidebars/{productname}/{version}.js << 'EOF'
// @ts-check

/** @type {import('@docusaurus/plugin-content-docs').SidebarsConfig} */
const sidebars = {
  productSidebar: [
    {
      type: 'category',
      label: 'ðŸ  Home',
      items: ['index', 'whatsnew'],
      collapsed: false,
    },
    {
      type: 'autogenerated',
      dirName: '.',
    },
  ],
};

module.exports = sidebars;
EOF
   ```

### 5. **Add Docusaurus Plugin Configuration**
   
   **For single-version products - Add to docusaurus.config.js:**
   ```javascript
   // {Product Name}
   [
     '@docusaurus/plugin-content-docs',
     {
       id: '{productname}',
       path: 'docs/{productname}',
       routeBasePath: 'docs/{productname}',
       sidebarPath: require.resolve('./sidebars/{productname}.js'),
       editUrl: 'https://github.com/netwrix/docs/tree/main/',
       exclude: ['**/CLAUDE.md'],
       versions: {
         current: {
           label: 'Current',
         },
       },
     },
   ],
   ```
   
   **For versioned products - Add to docusaurus.config.js:**
   ```javascript
   // {Product Name} {version}
   [
     '@docusaurus/plugin-content-docs',
     {
       id: '{productname}{version_with_underscores}',  // e.g., 'privilegesecure4_2'
       path: 'docs/{productname}/{version}',
       routeBasePath: 'docs/{productname}/{version}',
       sidebarPath: require.resolve('./sidebars/{productname}/{version}.js'),
       editUrl: 'https://github.com/netwrix/docs/tree/main/',
       exclude: ['**/CLAUDE.md'],
       versions: {
         current: {
           label: '{version}',
         },
       },
     },
   ],
   ```
   
   **Important Notes:**
   - Convert dots to underscores in ID: `4.2` â†’ `4_2`
   - Use exact version number in path
   - Point to the correct sidebar file

### 6. **Add to HomepageFeatures Component**
   
   **Choose appropriate category:**
   - **Identity Management**: Identity Manager, Directory Manager
   - **Privileged Access Management (PAM)**: Privilege Secure, Password Secure
   - **Directory Management**: Auditor, Password Policy Enforcer  
   - **Endpoint Management**: Endpoint Protector, Endpoint Policy Manager
   - **Data Security Posture Management (DSPM)**: 1Secure, Access Analyzer, Data Classification
   - **Identity Threat Detection & Response (ITDR)**: PingCastle, Threat Manager, Threat Prevention
   - **Other**: Access Information Center, Activity Monitor, Password Reset
   
   **Add to `/src/components/HomepageFeatures/index.js` in appropriate category:**
   
   **For single-version products:**
   ```javascript
   {
     name: '{Product Name}',
     description: '{Brief product description}',
     link: '/docs/{productname}',
   },
   ```
   
   **For versioned products:**
   ```javascript
   {
     name: '{Product Name}',
     description: '{Brief product description}',
     link: '/docs/{productname}/{version}',
     versions: [
       { version: '{version}', link: '/docs/{productname}/{version}', isLatest: true },
     ],
   },
   ```

### 7. **Test the New Product**
   
   **Start development server:**
   ```bash
   # For single-version products
   npm start {productname}
   
   # For versioned products
   npm start {productname}/{version}
   ```
   
   **Verify in browser:**
   - Product appears on homepage in correct category
   - Navigation works correctly
   - Version badge appears if versioned product
   - Images load properly (once added)
   - Links function correctly
   - Dark mode displays properly

### 8. **Run Quality Checks**
   
   **Format and validate:**
   ```bash
   # Format all files
   npm run format
   
   # Check for formatting issues
   npm run format:check
   
   # Clear cache if needed
   npm run clear
   ```

### 9. **Full Site Testing (Optional)**
   
   **Test complete site:**
   ```bash
   # Start all products (slower but comprehensive)
   npm run start:all
   
   # Build single product
   npm run build:single {productname}
   # or for versioned
   npm run build:single {productname}/{version}
   
   # Full site build
   npm run build
   ```

---

## Examples

### Example 1: Adding Single-Version Product "Network Discovery"

```bash
# 1. Create documentation directory
mkdir -p docs/networkdiscovery

# 2. Create index.md with Network Discovery content

# 3. Create image directory
mkdir -p static/img/product_docs/networkdiscovery
touch static/img/product_docs/networkdiscovery/.gitkeep

# 4. Create sidebar
# Create sidebars/networkdiscovery.js with standard structure

# 5. Update docusaurus.config.js - Add plugin with ID: 'networkdiscovery'

# 6. Update HomepageFeatures - Add to appropriate category

# 7. Test
npm start networkdiscovery
```

### Example 2: Adding Versioned Product "Threat Prevention 8.0"

```bash
# 1. Create documentation directory
mkdir -p docs/threatprevention/8.0

# 2. Create index.md and whatsnew.md with Threat Prevention 8.0 content

# 3. Create image directory
mkdir -p static/img/product_docs/threatprevention/8.0
touch static/img/product_docs/threatprevention/8.0/.gitkeep

# 4. Create sidebar
mkdir -p sidebars/threatprevention
# Create sidebars/threatprevention/8.0.js with standard structure

# 5. Update docusaurus.config.js - Add plugin with ID: 'threatprevention8_0'

# 6. Update HomepageFeatures - Add to ITDR category with version badge

# 7. Test
npm start threatprevention/8.0
```

---

## Configuration Patterns

### Product Name Processing
- **Input**: "Netwrix Privilege Secure" â†’ **Output**: "privilegesecure"
- **Input**: "Access Analyzer" â†’ **Output**: "accessanalyzer"
- **Input**: "Directory Manager" â†’ **Output**: "directorymanager"
- **Rules**: Lowercase, no spaces, remove "netwrix" prefix

### Plugin ID Naming Convention
- **Single version**: Use product name only (e.g., `'privilegesecure'`)
- **Versioned**: Add version with underscores (e.g., `'privilegesecure4_2'`)
- **Dots to underscores**: `4.2` â†’ `4_2`

### Sidebar File Patterns
- **Single version**: `./sidebars/{productname}.js`
- **Versioned**: `./sidebars/{productname}/{version}.js`

### Homepage Categories
- **Identity Management**: Core identity products
- **PAM**: Privileged access and password management
- **Directory Management**: AD auditing and management
- **Endpoint Management**: Endpoint security and policy
- **DSPM**: Data security and classification
- **ITDR**: Threat detection and response
- **Other**: Supporting tools and utilities

---

## Important Reminders

### Before You Start
- âœ… Use single-product mode: `npm start {productname}` for faster development
- âœ… Process product names correctly (lowercase, no spaces)
- âœ… Create appropriate image directories
- âœ… Test thoroughly before committing

### Configuration Rules
- âœ… Version dots â†’ underscores in plugin IDs
- âœ… Always exclude `['**/CLAUDE.md']` in plugin config
- âœ… Use correct sidebar path pattern
- âœ… Place in appropriate homepage category

### Quality Assurance
- âœ… Run `npm run format` before committing
- âœ… Test dark mode appearance
- âœ… Verify navigation links work
- âœ… Check homepage category placement
- âœ… Ensure images load from correct directories

### Common Issues
- ðŸš« **Port conflicts**: Default runs on port 3000
- ðŸš« **Memory issues**: Already configured with 8GB limit  
- ðŸš« **Cache problems**: Run `npm run clear` to reset
- ðŸš« **Hot reload failure**: Restart dev server
- ðŸš« **Missing images**: Check image directory paths

---

## Troubleshooting

### Build Failures
```bash
# Clear all caches
npm run clear
rm -rf .docusaurus

# Restart with fresh cache
npm start {productname}
```

### Missing Sidebar
```bash
# Check if sidebar file exists
ls -la sidebars/{productname}.js
# or for versioned
ls -la sidebars/{productname}/{version}.js

# Create if missing using examples above
```

### Product Not Showing on Homepage
- Verify product was added to correct category in HomepageFeatures
- Check that product name and link paths match exactly
- Ensure main `link` property is correct

### Image Not Loading
```bash
# Verify image directory exists
ls -la static/img/product_docs/{productname}/
# or for versioned
ls -la static/img/product_docs/{productname}/{version}/

# Check image paths in markdown (should be absolute)
grep -r "img/product_docs" docs/{productname}/
```

---

## Files Created Checklist

When complete, you should have created:

**For Single-Version Products:**
- [ ] `/docs/{productname}/` - New documentation directory
- [ ] `/docs/{productname}/index.md` - Product homepage
- [ ] `/static/img/product_docs/{productname}/` - Images directory  
- [ ] `/sidebars/{productname}.js` - Sidebar configuration
- [ ] `docusaurus.config.js` - Added plugin configuration
- [ ] `/src/components/HomepageFeatures/index.js` - Added to homepage

**For Versioned Products:**
- [ ] `/docs/{productname}/{version}/` - New documentation directory
- [ ] `/docs/{productname}/{version}/index.md` - Product homepage
- [ ] `/docs/{productname}/{version}/whatsnew.md` - What's new page
- [ ] `/static/img/product_docs/{productname}/{version}/` - Images directory  
- [ ] `/sidebars/{productname}/{version}.js` - Sidebar configuration
- [ ] `docusaurus.config.js` - Added plugin configuration
- [ ] `/src/components/HomepageFeatures/index.js` - Added with version badges

**Test commands**: 
- Single: `npm start {productname}`
- Versioned: `npm start {productname}/{version}`